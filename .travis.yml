dist: xenial
language: python

python:
  - "3.7"
  - "3.8"

services:
  - postgresql

before_script:
  - psql -c 'CREATE DATABASE travisci;' -U postgres
  - psql -c "CREATE USER travisci WITH PASSWORD 'travisSuperSekret6645';" -U postgres
  - psql -c 'GRANT ALL PRIVILEGES ON DATABASE travisci TO travisci;' -U postgres
  - psql -c 'ALTER USER travisci CREATEDB;' -U postgres

before_install:
  - cd api/djangormm
  

install:
  - pip install --upgrade pip
  - pip install -r requirements.txt

script:
  - python manage.py migrate
  - python manage.py test -v 2